2024-06-18 21:08:10.768 +03:00  INF  User profile is available. Using 'C:\Users\com\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-18 21:08:11.071 +03:00  INF  Now listening on: http://localhost:7101
2024-06-18 21:08:11.071 +03:00  INF  Now listening on: http://localhost:5146
2024-06-18 21:08:11.074 +03:00  INF  Application started. Press Ctrl+C to shut down.
2024-06-18 21:08:11.075 +03:00  INF  Hosting environment: Development
2024-06-18 21:08:11.075 +03:00  INF  Content root path: G:\WEB DEVELOPMENT\HealthCareProject\HealthCareAPIs\HealthCare\
2024-06-18 21:08:11.634 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/swagger/index.html - -
2024-06-18 21:08:12.263 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/swagger/index.html - - - 200 - text/html;charset=utf-8 633.0311ms
2024-06-18 21:08:12.270 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/_vs/browserLink - -
2024-06-18 21:08:12.275 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/_framework/aspnetcore-browser-refresh.js - -
2024-06-18 21:08:12.277 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 1.9722ms
2024-06-18 21:08:12.327 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.6014ms
2024-06-18 21:08:12.576 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/swagger/v1/swagger.json - -
2024-06-18 21:08:12.810 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 234.5139ms
2024-06-18 21:08:39.779 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Auth/Login application/json 111
2024-06-18 21:08:39.786 +03:00  INF  CORS policy execution successful.
2024-06-18 21:08:41.367 +03:00  INF  Executing endpoint 'HealthCare.Controllers.AuthController.Login (HealthCare)'
2024-06-18 21:08:41.431 +03:00  INF  Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HealthCare.Core.DTOS.AuthModule.RequestDtos.LoginRequest) on controller HealthCare.Controllers.AuthController (HealthCare).
2024-06-18 21:08:44.233 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:08:48.107 +03:00  INF  Executed DbCommand (120ms) [Parameters=[@__dto_UserName_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[NationalId], [u].[PassWord], [u].[Role], [u].[UploadedFileId], [u].[UserName], [u].[VerificationCode], [u0].[Id], [u0].[ContentType], [u0].[FileName], [u0].[FilePath], [u0].[StoredFileName]
FROM [Users] AS [u]
INNER JOIN [UploadedFiles] AS [u0] ON [u].[UploadedFileId] = [u0].[Id]
WHERE [u].[UserName] = @__dto_UserName_0
2024-06-18 21:08:48.749 +03:00  INF  Executed DbCommand (14ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[Token], [r].[userId]
FROM [RefreshTokens] AS [r]
WHERE ([r].[userId] = @__user_Id_0) AND ([r].[ExpiresOn] > GETDATE())
2024-06-18 21:08:49.080 +03:00  INF  Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([CreatedOn], [ExpiresOn], [Token], [userId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [RefreshTokens]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:08:49.179 +03:00  INF  Executing OkObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.AuthModule.ResponseDtos.LogInResponse, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:08:49.205 +03:00  INF  Executed action HealthCare.Controllers.AuthController.Login (HealthCare) in 7761.8888ms
2024-06-18 21:08:49.206 +03:00  INF  Executed endpoint 'HealthCare.Controllers.AuthController.Login (HealthCare)'
2024-06-18 21:08:49.213 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Auth/Login application/json 111 - 200 - application/json;+charset=utf-8 9434.4578ms
2024-06-18 21:09:30.386 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryG9lQsWiP8fidg1PE 64380
2024-06-18 21:09:30.388 +03:00  INF  CORS policy execution successful.
2024-06-18 21:09:30.554 +03:00  INF  Executing endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:09:30.663 +03:00  INF  Route matched with {action = "AddHospital", controller = "Hospitals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHospital(HealthCare.Core.DTOS.HospitalModule.RequestDto.HospitalRequestDto) on controller HealthCare.Controllers.HospitalsController (HealthCare).
2024-06-18 21:09:30.752 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:09:30.836 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Name]
FROM [Governorates] AS [g]
WHERE [g].[Id] = @__p_0
2024-06-18 21:09:30.866 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UploadedFiles] ([ContentType], [FileName], [FilePath], [StoredFileName])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [UploadedFiles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:09:30.937 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 150), @p1='?' (Size = 500), @p2='?' (Size = 150), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Hospitals] ([Address], [Description], [Name], [UploadedFileId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Hospitals]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:09:30.966 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HospitalGovernorates] ([GovernorateId], [HospitalId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [HospitalGovernorates]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:09:30.978 +03:00  INF  Executing OkObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.HospitalModule.ResponseDto.HospitalDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:09:30.983 +03:00  INF  Executed action HealthCare.Controllers.HospitalsController.AddHospital (HealthCare) in 319.4857ms
2024-06-18 21:09:30.983 +03:00  INF  Executed endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:09:30.985 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryG9lQsWiP8fidg1PE 64380 - 200 - application/json;+charset=utf-8 598.4151ms
2024-06-18 21:10:28.784 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundaryBKYOkRnsDZyzX7h4 1073
2024-06-18 21:10:28.794 +03:00  INF  CORS policy execution successful.
2024-06-18 21:10:28.804 +03:00  INF  Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (HospitalAdmin)
2024-06-18 21:10:28.807 +03:00  INF  AuthenticationScheme: Bearer was forbidden.
2024-06-18 21:10:28.808 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundaryBKYOkRnsDZyzX7h4 1073 - 403 0 - 23.5188ms
2024-06-18 21:12:20.923 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospitalAdmin?hospitalId=32 multipart/form-data;+boundary=----WebKitFormBoundaryA3fq0VQGz6suW5a8 577
2024-06-18 21:12:20.927 +03:00  INF  CORS policy execution successful.
2024-06-18 21:12:20.929 +03:00  INF  Executing endpoint 'HealthCare.Controllers.HospitalsController.AddHospitalAdmin (HealthCare)'
2024-06-18 21:12:20.938 +03:00  INF  Route matched with {action = "AddHospitalAdmin", controller = "Hospitals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHospitalAdmin(Int32, HealthCare.Core.DTOS.HospitalModule.RequestDto.HospitalAdminRequestDto) on controller HealthCare.Controllers.HospitalsController (HealthCare).
2024-06-18 21:12:20.956 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:12:20.972 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-18 21:12:20.973 +03:00  INF  Executed action HealthCare.Controllers.HospitalsController.AddHospitalAdmin (HealthCare) in 34.84ms
2024-06-18 21:12:20.973 +03:00  INF  Executed endpoint 'HealthCare.Controllers.HospitalsController.AddHospitalAdmin (HealthCare)'
2024-06-18 21:12:20.973 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospitalAdmin?hospitalId=32 multipart/form-data;+boundary=----WebKitFormBoundaryA3fq0VQGz6suW5a8 577 - 400 - application/problem+json;+charset=utf-8 49.9973ms
2024-06-18 21:12:29.150 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospitalAdmin?hospitalId=32 multipart/form-data;+boundary=----WebKitFormBoundary3oHgdyaR5iEbFHEb 588
2024-06-18 21:12:29.150 +03:00  INF  CORS policy execution successful.
2024-06-18 21:12:29.150 +03:00  INF  Executing endpoint 'HealthCare.Controllers.HospitalsController.AddHospitalAdmin (HealthCare)'
2024-06-18 21:12:29.151 +03:00  INF  Route matched with {action = "AddHospitalAdmin", controller = "Hospitals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHospitalAdmin(Int32, HealthCare.Core.DTOS.HospitalModule.RequestDto.HospitalAdminRequestDto) on controller HealthCare.Controllers.HospitalsController (HealthCare).
2024-06-18 21:12:29.154 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:12:29.196 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[NationalId], [u].[PassWord], [u].[Role], [u].[UploadedFileId], [u].[UserName], [u].[VerificationCode]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2024-06-18 21:12:29.217 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__hospitalId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [h].[Id], [h].[Address], [h].[Description], [h].[Name], [h].[UploadedFileId], [u].[Id], [u].[ContentType], [u].[FileName], [u].[FilePath], [u].[StoredFileName]
FROM [Hospitals] AS [h]
INNER JOIN [UploadedFiles] AS [u] ON [h].[UploadedFileId] = [u].[Id]
WHERE [h].[Id] = @__hospitalId_0
2024-06-18 21:12:29.260 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__dto_UserName_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UserName] = @__dto_UserName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:12:29.274 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__dto_NationalId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CivilRegestrations] AS [c]
        WHERE [c].[NationalId] = @__dto_NationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:12:29.284 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@__dto_NationalId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HospitalAdmins] AS [h]
        WHERE [h].[NationalId] = @__dto_NationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:12:29.290 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [HospitalAdmins] AS [h]
        WHERE [h].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:12:29.301 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UploadedFiles] ([ContentType], [FileName], [FilePath], [StoredFileName])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [UploadedFiles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:12:29.355 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (DbType = Int32), @p4='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HospitalAdmins] ([Email], [NationalId], [PassWord], [UploadedFileId], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4);
SELECT [Id]
FROM [HospitalAdmins]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:12:29.364 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AdminOfHospitals] ([HospitalAdminId], [HospitalId])
VALUES (@p5, @p6);
SELECT [Id]
FROM [AdminOfHospitals]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:12:29.378 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [NationalId], [PassWord], [Role], [UploadedFileId], [UserName], [VerificationCode])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [Users]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:12:29.396 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__HospitalAdmin_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = @__HospitalAdmin_0
2024-06-18 21:12:29.429 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:12:29.439 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([CreatedOn], [ExpiresOn], [Token], [userId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [RefreshTokens]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:12:29.441 +03:00  INF  Executing OkObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.HospitalModule.ResponseDto.HospitalAdminDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:12:29.447 +03:00  INF  Executed action HealthCare.Controllers.HospitalsController.AddHospitalAdmin (HealthCare) in 296.0301ms
2024-06-18 21:12:29.447 +03:00  INF  Executed endpoint 'HealthCare.Controllers.HospitalsController.AddHospitalAdmin (HealthCare)'
2024-06-18 21:12:29.447 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospitalAdmin?hospitalId=32 multipart/form-data;+boundary=----WebKitFormBoundary3oHgdyaR5iEbFHEb 588 - 200 - application/json;+charset=utf-8 297.4838ms
2024-06-18 21:13:00.905 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundaryBfKIR1mFFxmk1wVr 1073
2024-06-18 21:13:00.909 +03:00  INF  CORS policy execution successful.
2024-06-18 21:13:00.910 +03:00  INF  Executing endpoint 'HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare)'
2024-06-18 21:13:00.920 +03:00  INF  Route matched with {action = "AddDoctor", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(HealthCare.Core.DTOS.DoctorModule.RequestDtos.DoctorRequestDto) on controller HealthCare.Controllers.DoctorsController (HealthCare).
2024-06-18 21:13:00.922 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:13:00.939 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-06-18 21:13:00.940 +03:00  INF  Executed action HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare) in 19.0967ms
2024-06-18 21:13:00.940 +03:00  INF  Executed endpoint 'HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare)'
2024-06-18 21:13:00.940 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundaryBfKIR1mFFxmk1wVr 1073 - 400 - application/problem+json;+charset=utf-8 35.2174ms
2024-06-18 21:13:12.343 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundarySKSU4SLObRMdB7oq 1046
2024-06-18 21:13:12.343 +03:00  INF  CORS policy execution successful.
2024-06-18 21:13:12.343 +03:00  INF  Executing endpoint 'HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare)'
2024-06-18 21:13:12.344 +03:00  INF  Route matched with {action = "AddDoctor", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(HealthCare.Core.DTOS.DoctorModule.RequestDtos.DoctorRequestDto) on controller HealthCare.Controllers.DoctorsController (HealthCare).
2024-06-18 21:13:12.344 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:13:12.364 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__HospitalAdmin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[NationalId], [u].[PassWord], [u].[Role], [u].[UploadedFileId], [u].[UserName], [u].[VerificationCode]
FROM [Users] AS [u]
WHERE ([u].[Id] = @__userId_0) AND ([u].[Role] = @__HospitalAdmin_1)
2024-06-18 21:13:12.418 +03:00  INF  Executed DbCommand (37ms) [Parameters=[@__ThisUser_UserName_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [h].[Id], [h].[Email], [h].[NationalId], [h].[PassWord], [h].[UploadedFileId], [h].[UserName], [a].[Id], [a].[HospitalAdminId], [a].[HospitalId]
FROM [HospitalAdmins] AS [h]
LEFT JOIN [AdminOfHospitals] AS [a] ON [h].[Id] = [a].[HospitalAdminId]
WHERE [h].[UserName] = @__ThisUser_UserName_0
2024-06-18 21:13:12.423 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__dto_NationalId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CivilRegestrations] AS [c]
        WHERE [c].[NationalId] = @__dto_NationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:13:12.431 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__dto_NationalId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[NationalId] = @__dto_NationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:13:12.432 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.DoctorModule.ResponseDtos.AddDoctorResponseDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:13:12.433 +03:00  INF  Executed action HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare) in 89.4691ms
2024-06-18 21:13:12.433 +03:00  INF  Executed endpoint 'HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare)'
2024-06-18 21:13:12.433 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundarySKSU4SLObRMdB7oq 1046 - 400 - application/json;+charset=utf-8 90.4914ms
2024-06-18 21:13:59.148 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundary2EP9DWMB643vLZMk 1046
2024-06-18 21:13:59.148 +03:00  INF  CORS policy execution successful.
2024-06-18 21:13:59.148 +03:00  INF  Executing endpoint 'HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare)'
2024-06-18 21:13:59.148 +03:00  INF  Route matched with {action = "AddDoctor", controller = "Doctors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddDoctor(HealthCare.Core.DTOS.DoctorModule.RequestDtos.DoctorRequestDto) on controller HealthCare.Controllers.DoctorsController (HealthCare).
2024-06-18 21:13:59.150 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:13:59.151 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__HospitalAdmin_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[NationalId], [u].[PassWord], [u].[Role], [u].[UploadedFileId], [u].[UserName], [u].[VerificationCode]
FROM [Users] AS [u]
WHERE ([u].[Id] = @__userId_0) AND ([u].[Role] = @__HospitalAdmin_1)
2024-06-18 21:13:59.152 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__ThisUser_UserName_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [h].[Id], [h].[Email], [h].[NationalId], [h].[PassWord], [h].[UploadedFileId], [h].[UserName], [a].[Id], [a].[HospitalAdminId], [a].[HospitalId]
FROM [HospitalAdmins] AS [h]
LEFT JOIN [AdminOfHospitals] AS [a] ON [h].[Id] = [a].[HospitalAdminId]
WHERE [h].[UserName] = @__ThisUser_UserName_0
2024-06-18 21:13:59.153 +03:00  INF  Executed DbCommand (0ms) [Parameters=[@__dto_NationalId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CivilRegestrations] AS [c]
        WHERE [c].[NationalId] = @__dto_NationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:13:59.154 +03:00  INF  Executed DbCommand (0ms) [Parameters=[@__dto_NationalId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[NationalId] = @__dto_NationalId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:13:59.156 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__dto_UserName_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[UserName] = @__dto_UserName_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:13:59.170 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Doctors] AS [d]
        WHERE [d].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-06-18 21:13:59.195 +03:00  INF  Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [s].[Id], [s].[Name], [s].[UploadedFileId], [u].[Id], [u].[ContentType], [u].[FileName], [u].[FilePath], [u].[StoredFileName]
FROM [Specializations] AS [s]
INNER JOIN [UploadedFiles] AS [u] ON [s].[UploadedFileId] = [u].[Id]
WHERE [s].[Id] = @__id_0
2024-06-18 21:13:59.228 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@__ThisHospitalAdmin_AdminOfHospital_HospitalId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [h].[Id], [h].[Address], [h].[Description], [h].[Name], [h].[UploadedFileId], [u].[Id], [u].[ContentType], [u].[FileName], [u].[FilePath], [u].[StoredFileName]
FROM [Hospitals] AS [h]
INNER JOIN [UploadedFiles] AS [u] ON [h].[UploadedFileId] = [u].[Id]
WHERE [h].[Id] = @__ThisHospitalAdmin_AdminOfHospital_HospitalId_0
2024-06-18 21:13:59.267 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UploadedFiles] ([ContentType], [FileName], [FilePath], [StoredFileName])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [UploadedFiles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:13:59.376 +03:00  INF  Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (DbType = Single), @p6='?' (DbType = Int32), @p7='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Doctors] ([Description], [Email], [FullName], [NationalId], [PassWord], [Rate], [UploadedFileId], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Doctors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:13:59.427 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [DoctorSpecializations] ([DoctorId], [SpecializationId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [DoctorSpecializations]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:13:59.434 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HospitalDoctors] ([DoctorId], [HospitalId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [HospitalDoctors]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:13:59.455 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [NationalId], [PassWord], [Role], [UploadedFileId], [UserName], [VerificationCode])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
SELECT [Id]
FROM [Users]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:13:59.464 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__Doctor_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Name] = @__Doctor_0
2024-06-18 21:13:59.468 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [UserRoles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:13:59.477 +03:00  INF  Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([CreatedOn], [ExpiresOn], [Token], [userId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [RefreshTokens]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:13:59.479 +03:00  INF  Executing OkObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.DoctorModule.ResponseDtos.AddDoctorResponseDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:13:59.486 +03:00  INF  Executed action HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare) in 337.2683ms
2024-06-18 21:13:59.486 +03:00  INF  Executed endpoint 'HealthCare.Controllers.DoctorsController.AddDoctor (HealthCare)'
2024-06-18 21:13:59.486 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Doctors/AddDoctor multipart/form-data;+boundary=----WebKitFormBoundary2EP9DWMB643vLZMk 1046 - 200 - application/json;+charset=utf-8 338.1776ms
2024-06-18 21:36:31.989 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundary81WOrE8VByZ4PHAW 571
2024-06-18 21:36:31.989 +03:00  INF  CORS policy execution successful.
2024-06-18 21:36:31.989 +03:00  INF  Executing endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:36:31.989 +03:00  INF  Route matched with {action = "AddHospital", controller = "Hospitals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHospital(HealthCare.Core.DTOS.HospitalModule.RequestDto.HospitalRequestDto) on controller HealthCare.Controllers.HospitalsController (HealthCare).
2024-06-18 21:36:31.990 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:36:32.011 +03:00  INF  Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Name]
FROM [Governorates] AS [g]
WHERE [g].[Id] = @__p_0
2024-06-18 21:36:32.027 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.HospitalModule.ResponseDto.HospitalDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:36:32.111 +03:00  INF  Executed action HealthCare.Controllers.HospitalsController.AddHospital (HealthCare) in 121.9026ms
2024-06-18 21:36:32.112 +03:00  INF  Executed endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:36:32.114 +03:00  ERR  An unhandled exception has occurred while executing the request.System.NotSupportedException: Serialization and deserialization of 'System.IntPtr' instances are not supported. Path: $.Error.TargetSite.MethodHandle.Value.
 ---> System.NotSupportedException: Serialization and deserialization of 'System.IntPtr' instances are not supported.
   at System.Text.Json.Serialization.Converters.UnsupportedTypeConverter`1.Write(Utf8JsonWriter writer, T value, JsonSerializerOptions options)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(WriteStack& state, NotSupportedException ex)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](JsonConverter jsonConverter, Utf8JsonWriter writer, TValue& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)

2024-06-18 21:36:32.205 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundary81WOrE8VByZ4PHAW 571 - 500 - text/plain;+charset=utf-8 216.0021ms
2024-06-18 21:48:19.281 +03:00  INF  User profile is available. Using 'C:\Users\com\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-18 21:48:19.380 +03:00  INF  Now listening on: http://localhost:7101
2024-06-18 21:48:19.380 +03:00  INF  Now listening on: http://localhost:5146
2024-06-18 21:48:19.382 +03:00  INF  Application started. Press Ctrl+C to shut down.
2024-06-18 21:48:19.383 +03:00  INF  Hosting environment: Development
2024-06-18 21:48:19.383 +03:00  INF  Content root path: G:\WEB DEVELOPMENT\HealthCareProject\HealthCareAPIs\HealthCare\
2024-06-18 21:48:19.927 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/swagger/index.html - -
2024-06-18 21:48:20.106 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/swagger/index.html - - - 200 - text/html;charset=utf-8 184.2196ms
2024-06-18 21:48:20.107 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/_vs/browserLink - -
2024-06-18 21:48:20.109 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/_framework/aspnetcore-browser-refresh.js - -
2024-06-18 21:48:20.110 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/_framework/aspnetcore-browser-refresh.js - - - 200 12352 application/javascript;+charset=utf-8 1.2072ms
2024-06-18 21:48:20.119 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 12.3787ms
2024-06-18 21:48:20.279 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/swagger/v1/swagger.json - -
2024-06-18 21:48:20.286 +03:00  INF  Request starting HTTP/1.1 GET http://localhost:7101/swagger/favicon-32x32.png - -
2024-06-18 21:48:20.306 +03:00  INF  Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-06-18 21:48:20.307 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/swagger/favicon-32x32.png - - - 200 628 image/png 20.9864ms
2024-06-18 21:48:20.404 +03:00  INF  Request finished HTTP/1.1 GET http://localhost:7101/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 125.3914ms
2024-06-18 21:48:52.105 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Auth/Login application/json 111
2024-06-18 21:48:52.110 +03:00  INF  CORS policy execution successful.
2024-06-18 21:48:52.169 +03:00  INF  Executing endpoint 'HealthCare.Controllers.AuthController.Login (HealthCare)'
2024-06-18 21:48:52.224 +03:00  INF  Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HealthCare.Core.DTOS.AuthModule.RequestDtos.LoginRequest) on controller HealthCare.Controllers.AuthController (HealthCare).
2024-06-18 21:48:54.329 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:48:56.081 +03:00  INF  Executed DbCommand (102ms) [Parameters=[@__dto_UserName_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[Email], [u].[NationalId], [u].[PassWord], [u].[Role], [u].[UploadedFileId], [u].[UserName], [u].[VerificationCode], [u0].[Id], [u0].[ContentType], [u0].[FileName], [u0].[FilePath], [u0].[StoredFileName]
FROM [Users] AS [u]
INNER JOIN [UploadedFiles] AS [u0] ON [u].[UploadedFileId] = [u0].[Id]
WHERE [u].[UserName] = @__dto_UserName_0
2024-06-18 21:48:56.539 +03:00  INF  Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreatedOn], [r].[ExpiresOn], [r].[Token], [r].[userId]
FROM [RefreshTokens] AS [r]
WHERE ([r].[userId] = @__user_Id_0) AND ([r].[ExpiresOn] > GETDATE())
2024-06-18 21:48:56.553 +03:00  INF  Executing OkObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.AuthModule.ResponseDtos.LogInResponse, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:48:56.576 +03:00  INF  Executed action HealthCare.Controllers.AuthController.Login (HealthCare) in 4340.6566ms
2024-06-18 21:48:56.577 +03:00  INF  Executed endpoint 'HealthCare.Controllers.AuthController.Login (HealthCare)'
2024-06-18 21:48:56.582 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Auth/Login application/json 111 - 200 - application/json;+charset=utf-8 4476.8823ms
2024-06-18 21:49:22.181 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryqydGEQZf7InaBImd 553
2024-06-18 21:49:22.183 +03:00  INF  CORS policy execution successful.
2024-06-18 21:49:22.317 +03:00  INF  Executing endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:49:22.326 +03:00  INF  Route matched with {action = "AddHospital", controller = "Hospitals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHospital(HealthCare.Core.DTOS.HospitalModule.RequestDto.HospitalRequestDto) on controller HealthCare.Controllers.HospitalsController (HealthCare).
2024-06-18 21:49:22.423 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:49:22.486 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Name]
FROM [Governorates] AS [g]
WHERE [g].[Id] = @__p_0
2024-06-18 21:49:22.793 +03:00  INF  Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UploadedFiles] ([ContentType], [FileName], [FilePath], [StoredFileName])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [UploadedFiles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:49:22.939 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 150), @p1='?' (Size = 500), @p2='?' (Size = 150), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Hospitals] ([Address], [Description], [Name], [UploadedFileId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Hospitals]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:49:22.978 +03:00  INF  Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HospitalGovernorates] ([GovernorateId], [HospitalId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [HospitalGovernorates]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:49:22.984 +03:00  INF  Executing OkObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.HospitalModule.ResponseDto.HospitalDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:49:22.989 +03:00  INF  Executed action HealthCare.Controllers.HospitalsController.AddHospital (HealthCare) in 662.2109ms
2024-06-18 21:49:22.989 +03:00  INF  Executed endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:49:22.990 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryqydGEQZf7InaBImd 553 - 200 - application/json;+charset=utf-8 809.0721ms
2024-06-18 21:49:58.102 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryjANqQbV5lWiw7jpf 13306
2024-06-18 21:49:58.106 +03:00  INF  CORS policy execution successful.
2024-06-18 21:49:58.109 +03:00  INF  Executing endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:49:58.109 +03:00  INF  Route matched with {action = "AddHospital", controller = "Hospitals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHospital(HealthCare.Core.DTOS.HospitalModule.RequestDto.HospitalRequestDto) on controller HealthCare.Controllers.HospitalsController (HealthCare).
2024-06-18 21:49:58.122 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:49:58.139 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Name]
FROM [Governorates] AS [g]
WHERE [g].[Id] = @__p_0
2024-06-18 21:49:58.140 +03:00  INF  Executing BadRequestObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.HospitalModule.ResponseDto.HospitalDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:49:58.140 +03:00  INF  Executed action HealthCare.Controllers.HospitalsController.AddHospital (HealthCare) in 31.6522ms
2024-06-18 21:49:58.141 +03:00  INF  Executed endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:49:58.141 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryjANqQbV5lWiw7jpf 13306 - 400 - application/json;+charset=utf-8 39.2293ms
2024-06-18 21:50:09.220 +03:00  INF  Request starting HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryr8AK7pvf7yPgRsJG 47580
2024-06-18 21:50:09.220 +03:00  INF  CORS policy execution successful.
2024-06-18 21:50:09.221 +03:00  INF  Executing endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:50:09.222 +03:00  INF  Route matched with {action = "AddHospital", controller = "Hospitals"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddHospital(HealthCare.Core.DTOS.HospitalModule.RequestDto.HospitalRequestDto) on controller HealthCare.Controllers.HospitalsController (HealthCare).
2024-06-18 21:50:09.225 +03:00  INF  Entity Framework Core 6.0.23 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.23' with options: None
2024-06-18 21:50:09.230 +03:00  INF  Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Name]
FROM [Governorates] AS [g]
WHERE [g].[Id] = @__p_0
2024-06-18 21:50:09.240 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UploadedFiles] ([ContentType], [FileName], [FilePath], [StoredFileName])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [UploadedFiles]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:50:09.245 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 150), @p1='?' (Size = 500), @p2='?' (Size = 150), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Hospitals] ([Address], [Description], [Name], [UploadedFileId])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Hospitals]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:50:09.251 +03:00  INF  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [HospitalGovernorates] ([GovernorateId], [HospitalId])
VALUES (@p0, @p1);
SELECT [Id]
FROM [HospitalGovernorates]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2024-06-18 21:50:09.252 +03:00  INF  Executing OkObjectResult, writing value of type 'HealthCare.Core.DTOS.GeneralResponse`1[[HealthCare.Core.DTOS.HospitalModule.ResponseDto.HospitalDto, HealthCare.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-18 21:50:09.252 +03:00  INF  Executed action HealthCare.Controllers.HospitalsController.AddHospital (HealthCare) in 30.4896ms
2024-06-18 21:50:09.252 +03:00  INF  Executed endpoint 'HealthCare.Controllers.HospitalsController.AddHospital (HealthCare)'
2024-06-18 21:50:09.252 +03:00  INF  Request finished HTTP/1.1 POST http://localhost:7101/api/Hospitals/AddHospital multipart/form-data;+boundary=----WebKitFormBoundaryr8AK7pvf7yPgRsJG 47580 - 200 - application/json;+charset=utf-8 32.1168ms
